### Objects

View and manage your objects within a bucket.

<!-------------------- GET OBJECTS -------------------->

#### Get Objects

```shell
curl -X GET \
   -H "MC-Api-Key: your_api_key" \
   "https://cloudmc_endpoint/rest/services/aws/test-env/objects?regionName=us-east-1&prefix=photos&bucketName=bucket-root-nvisf'"
```
> The above command returns a JSON structured like this:

```json
{
    "data": [
        {
            "name": "cat.jpeg",
            "id": "us-east-1/bucket-root-nvisf/photos/cat.jpeg",
            "size": 35186,
            "fullPath": "photos/cat.jpeg",
            "storageClass": "STANDARD",
            "lastModified": "Mon Mar 21 14:15:05 EDT 2022",
            "displaySize": {
                "value": "34.4",
                "unitKey": "units.filesizes.KB"
            },
            "contentType": "image/jpeg",
            "eTag": "a8b886246bccda023fbb348731c1bd05",
            "isFolder": false,
            "bucketName": "bucket-root-nvisf",
            "region": "us-east-1",
            "isVirtual": false
        },
        {
            "name": "miami",
            "id": "us-east-1/bucket-root-nvisf/photos/miami/",
            "fullPath": "photos/miami/",
            "contentType": "application/directory",
            "eTag": "",
            "isFolder": true,
            "bucketName": "bucket-root-nvisf",
            "region": "us-east-1",
            "isVirtual": false
        },
        {
            "name": "vegas",
            "id": "us-east-1/bucket-root-nvisf/photos/vegas/",
            "fullPath": "photos/vegas/",
            "contentType": "application/directory",
            "eTag": "",
            "isFolder": true,
            "bucketName": "bucket-root-nvisf",
            "region": "us-east-1",
            "isVirtual": false
        }
    ],
    "metadata": {
        "recordCount": 3
    }
}
```

<code>GET /services/<a href="#administration-service-connections">:service_code</a>/<a href="#administration-environments">:environment_name</a>/objects/?regionName=us-east-1&bucketName=bucket-root-nvisf</code>

Retrieve a list of objects inside a given folder inside a given bucket.

| Attributes                        | &nbsp;                                                                                                                                                                                                                   |
|-----------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `id`<br/>*string*                 | The ID of the object, which is of the form ":regionName/:bucketName/:objectName".                                                                                                                                                |
| `name`<br/>*string*               | The name of the object.                                                                                                                                                     
| `fullPath`<br/>*string*               | The actual key of the object inside the bucket, which is represented as a full path.                                                                                                                                                    |
| `size`<br/>*integer*     | The size of the object in bytes.                                                                                                                                                     |
| `storageClass`<br/>*string*            | The type of storage class on the object.                                                                                                                                                      |
| `lastModified`<br/>*string*       | The date the object was last updated.
| `displaySize`<br/>*string*       | The size of the object represented as an object in either KB/MB/GB.
| `contentType`<br/>*string*       | The type of file.
| `eTag`<br/>*string*       | The eTag of the object generated by S3 during initial upload.
| `isFolder`<br/>*boolean*       | Boolean denoting whether the object acts as a folder. This is always true when the name ends with a '/' character.
| `bucketName`<br/>*string*       | The name of the bucket the object exists within.
| `region`<br/>*string*       | The name of the region the object exists within.
| `isVirtual`<br/>*string*       | Boolean denoting whether the folder is virtual. If true there exists no object named ‘`{folderName}/`‘, and the folder exists only as a part of a complete object path (`{folderName}/{objectName}`). If false, there exists a key in the bucket named ‘{folderName}/’. If the query parameter `nested = true`, the request will not return any virtual folders.

| Required Query Paramaters                        | &nbsp;                                                                                                                                                                                                                   |
|-----------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `bucketName`<br/>*string*       | The name of the bucket to get the objects in.
| `regionName`<br/>*string*       | The name of the region to get the objects in.

| Optional Query Paramaters                        | &nbsp;                                                                                                                                                                                                                   |
|-----------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `prefix`<br/>*string*       | The path of the objects to search in. If prefix is left blank, it will search for objects in the root. If nested is true and prefix is left blank, it will obtain all objects in the bucket.
| `nested`<br/>*boolean*       | Whether to include nested objects or just include objects in the root of the prefix. If `nested=true`, the request will not return any virtual folders.





#### Upload Object

```shell
curl -X POST \
   -H "MC-Api-Key: your_api_key" \
   "https://cloudmc_endpoint/rest/services/operation/upload" \
   --form operation=upload \
   --form entityType=objects \
   --form serviceConnectionId=connection_id \
   --form environmentId=environment_id \
   --form filename=file_size \
   --form bucketName=bucket_name \
   --form regionName=region_name \
   --form file=path_to_file
```

> Request body examples as Multipart Form:

```json
operation: upload
entityType: objects
serviceConnectionId: connection_id
environmentId: environment_id
filename: file_size
bucketName: bucket_name
regionName: region_name
file: path_to_file
```

> The above command returns a JSON structured like this:

```json
{
	"files": [
		{
			"name": "filename.png",
			"size": 93240,
			"status": "success"
		}
	]
}
```

<code>POST /services/operation/upload</code>

Upload a file to a bucket in Amazon S3.

Attributes | &nbsp;
---------- | -----
`filename: file_size`<br/>*string* | Multipart form part: key-value pair with the name of the file as key and its file size as value.
`bucketName`<br/>*string* | Multipart form part: key-value pair with "bucketName" as key and the name of the bucket to upload to as value.
`regionName`<br/>*string* | Multipart form part: key-value pair with "regionName" as key and the name of the region to upload to as value.
`file`<br/>*file* | Multipart form part: key-value pair with "file" as key and the file to upload as value.


<!-------------------- DOWNLOAD AN OBJECT -------------------->

#### Download Object

```shell
curl --request GET \
  -H "MC-Api-Key: your_api_key" \
  "https://cloudmc_endpoint/rest/services/operations/:service_connection_id/download?bucketName=akc-buck&regionName=us-east-1&id=us-east-1/akc-buck/api123.png&entityType=objects&operation=download&environmentId=97430433-875c-4ba5-8c57-90a051a52729"
```

<code>GET /services/operation/:service_connection_id/download</code>

Download an object from a bucket in Amazon S3.

> The above command returns the binary that represent the file downloaded.

Required Query Parameters | &nbsp;
---- | -----------
`bucketName`<br/>*string* | Name of the bucket to download the file from.
`regionName`<br/>*string* | Name of the region to download the file from.
`id`<br/>*string* | The ID of the object to download, which is of the form ":regionName/:bucketName/:objectName".
`entityType`<br/>*string* | The type of entity to download. In this case 'objects'.
`operation`<br/>*string* | The type of operation to execute. In this case 'download'.
`environmentId`<br/>*string* | The id of environment which owns the object.


<!-------------------- DELETE AN OBJECT -------------------->

#### Delete Objects

```shell
curl -X DELETE \
   -H "MC-Api-Key: your_api_key" \
   "https://cloudmc_endpoint/rest/services/aws/test-env/objects/:regionName/:bucketName/:pathToObject/?operation=object_delete"
```

> Request body examples:

```json
{
  "id": "ap-south-1/bucket-root-dwyak/images/",
}
```

> The above command returns a JSON structured like this:

```json
{
    "taskId": "30121175-926a-4fd2-991b-ff303ffdf905",
    "taskStatus": "PENDING"
}
```

<code>DELETE /services/<a href="#administration-service-connections">:service_code</a>/<a href="#administration-environments">:environment_name</a>/objects/:regionName/:bucketName/:fullPath</code>

Delete an object from a bucket in Amazon S3.

| Attributes                 | &nbsp;                                        |
|----------------------------|-----------------------------------------------|
| `taskId` <br/>*string*     | The task id related to the object deletion. |
| `taskStatus` <br/>*string* | The status of the operation.                  |

